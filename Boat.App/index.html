<!DOCTYPE html>
<html ng-app="com.boat.app">
<head>
    <title>Boat index</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="master/vendor/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
    <link href="master/vendor/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet" />
    <script type="text/javascript" src="master/vendor/angular/angular.js"></script>
    <script type="text/javascript" src="master/vendor/angular-ui-router/release/angular-ui-router.js"></script>
    <script src="app/js/app.js"></script>
    <script type="text/javascript">
        //var boat = angular.module('com.boat.app', ['ui.router']);
        //boat.config(function ($stateProvider, $urlRouterProvider) {
        //    //
        //    //For any unmatched url,redirect to /list
        //    $urlRouterProvider.otherwise("/blog");

        //    //
        //    //Now set up the states
        //    $stateProvider
        //        .state("login", {
        //            url: "/login",
        //            templateUrl: "app/pages/login.html",
        //            controller: 'LoginCtrl'
        //        })
        //        .state("logout", {
        //            url: "/logout",
        //            templateUrl: "app/pages/login.html"
        //        })
        //        .state("blog", {
        //            url: "/blog",
        //            templateUrl: "app/views/blog.html"
        //        })
        //        .state('blog.list', {
        //            url: "/list",
        //            templateUrl: "app/views/blog.list.html",
        //            controller: function ($scope) {
        //                $scope.items = ["A", "List", "Of", "Items"];
        //            }
        //        })
        //        .state('product', {
        //            url: "/product",
        //            templateUrl: "app/views/product.html"
        //        })
        //        .state('product.list', {
        //            url: "/list",
        //            templateUrl: "app/views/product.list.html",
        //            controller: function ($scope) {
        //                $scope.things = ["A", "Set", "Of", "Things"];
        //            }
        //        });
        //});

        //boat
        //.constant('AUTH_EVENTS', {
        //    notAuthenticated: 'auth-not-authenticated',
        //    notAuthorized: 'auth-not-authorized'
        //})
        //.constant('USER_ROLES', {
        //    admin: 'admin_role',
        //    public: 'pulic_role'
        //});

        ////controller
        //boat
        //    .controller('AppCtrl', function ($scope, $state,$window, AuthService, AUTH_EVENTS) {
        //        $scope.username = AuthService.username();

        //        $scope.$on(AUTH_EVENTS.notAuthorized, function (event) {
        //            $window.alert('You are not allowed to access this resource.');
        //            //var alertPopup = $ionicPopup.alert({
        //            //    title: 'Unauthorized!',
        //            //    template: 'You are not allowed to access this resource.'
        //            //});
        //        });

        //        $scope.$on(AUTH_EVENTS.notAuthenticated, function (event) {
        //            AuthService.logout();
        //            $state.go('login');
        //            $window.alert('Sorry, You have to login again.');
        //            //var alertPopup = $ionicPopup.alert({
        //            //    title: 'Session Lost!',
        //            //    template: 'Sorry, You have to login again.'
        //            //});
        //        });

        //        $scope.setCurrentUsername = function (name) {
        //            $scope.username = name;
        //        };
        //    })
        //    .controller('LoginCtrl', function ($scope, $state, $window, AuthService) {
        //        $scope.data = {};

        //        $scope.login = function (data) {
        //            AuthService.login(data.username, data.password).then(function (authenticated) {
        //                $state.go('blog', {}, { reload: true });
        //                $scope.setCurrentUsername(data.username);
        //            }, function (err) {
        //                $window.alert(err.toString());
        //                //var alertPopup = $ionicPopup.alert({
        //                //    title: 'Login failed!',
        //                //    template: 'Please check your credentials!'
        //                //});
        //            });
        //        };
        //    })
        //    .controller('DashCtrl', function ($scope, $state, $http, $window, AuthService, USER_ROLES) {
        //        $scope.isAuthorized = AuthService.isAuthorized(USER_ROLES);

        //        $scope.logout = function () {
        //            AuthService.logout();
        //            $state.go('login');
        //        };

        //        $scope.performValidRequest = function () {
        //            $http.get('http://localhost:8100/valid').then(
        //              function (result) {
        //                  $scope.response = result;
        //              });
        //        };

        //        $scope.performUnauthorizedRequest = function () {
        //            $http.get('http://localhost:8100/notauthorized').then(
        //              function (result) {
        //                  // No result here..
        //              }, function (err) {
        //                  $scope.response = err;
        //              });
        //        };

        //        $scope.performInvalidRequest = function () {
        //            $http.get('http://localhost:8100/notauthenticated').then(
        //              function (result) {
        //                  // No result here..
        //              }, function (err) {
        //                  $scope.response = err;
        //              });
        //        };
        //    });

        //boat.service('AuthService', function ($q, $http, $window, USER_ROLES) {
        //    var LOCAL_TOKEN_KEY = 'yourTokenKey';
        //    var username = '';
        //    var isAuthenticated = false;
        //    var role = '';
        //    var authToken;

        //    function loadUserCredentials() {
        //        var token = $window.localStorage.getItem(LOCAL_TOKEN_KEY);
        //        if (token) {
        //            useCredentials(token);
        //        }
        //    }

        //    function storeUserCredentials(token) {
        //        $window.localStorage.setItem(LOCAL_TOKEN_KEY, token);
        //        useCredentials(token);
        //    }

        //    function useCredentials(token) {
        //        username = token.split('.')[0];
        //        isAuthenticated = true;
        //        authToken = token;

        //        if (username == 'admin') {
        //            role = USER_ROLES.admin
        //        }
        //        if (username == 'user') {
        //            role = USER_ROLES.public
        //        }

        //        // Set the token as header for your requests!
        //        $http.defaults.headers.common['X-Auth-Token'] = token;
        //    }

        //    function destroyUserCredentials() {
        //        authToken = undefined;
        //        username = '';
        //        isAuthenticated = false;
        //        $http.defaults.headers.common['X-Auth-Token'] = undefined;
        //        $window.localStorage.removeItem(LOCAL_TOKEN_KEY);
        //    }

        //    var login = function (name, pw) {
        //        return $q(function (resolve, reject) {
        //            if ((name == 'admin' && pw == '1') || (name == 'user' && pw == '1')) {
        //                // Make a request and receive your auth token from your server
        //                storeUserCredentials(name + '.yourServerToken');
        //                resolve('Login success.');
        //            } else {
        //                reject('Login Failed.');
        //            }
        //        });
        //    };

        //    var logout = function () {
        //        destroyUserCredentials();
        //    };

        //    var isAuthorized = function (authorizedRoles) {
        //        if (!angular.isArray(authorizedRoles)) {
        //            authorizedRoles = [authorizedRoles];
        //        }
        //        return (isAuthenticated && authorizedRoles.indexOf(role) !== -1);
        //    };

        //    loadUserCredentials();

        //    return {
        //        login: login,
        //        logout: logout,
        //        isAuthorized: isAuthorized,
        //        isAuthenticated: function () { return isAuthenticated; },
        //        username: function () { return username; },
        //        role: function () { return role; }
        //    };
        //});

        //boat.factory('AuthInterceptor', function ($rootScope,$q,AUTH_EVENTS) {
        //        return {
        //            responseError: function(response) {
        //                $rootScope.$broadcast({
        //                    401: AUTH_EVENTS.notAuthenticated,
        //                    403:AUTH_EVENTS.notAuthorized
        //                }[response.status], response);
        //                return $q.reject(response);
        //            }
        //        };
        //    })
        //   .config(function ($httpProvider) {
        //       $httpProvider.interceptors.push('AuthInterceptor');
        //   });

        ////boat
        ////.run(function($httpBackend){
        ////    $httpBackend.whenGET('http://localhost:8100/valid')
        ////          .respond({message: 'This is my valid response!'});
        ////    $httpBackend.whenGET('http://localhost:8100/notauthenticated')
        ////          .respond(401, {message: "Not Authenticated"});
        ////    $httpBackend.whenGET('http://localhost:8100/notauthorized')
        ////          .respond(403, {message: "Not Authorized"});
        //boat.run(function ($rootScope, $state, AuthService, AUTH_EVENTS) {
        //    $rootScope.$on('$stateChangeStart', function (event, next, nextParams, fromState) {

        //        if ('data' in next && 'authorizedRoles' in next.data) {
        //            var authorizedRoles = next.data.authorizedRoles;
        //            if (!AuthService.isAuthorized(authorizedRoles)) {
        //                event.preventDefault();
        //                $state.go($state.current, {}, { reload: true });
        //                $rootScope.$broadcast(AUTH_EVENTS.notAuthorized);
        //            }
        //        }

        //        if (!AuthService.isAuthenticated()) {
        //            if (next.name !== 'login') {
        //                event.preventDefault();
        //                $state.go('login');
        //            }
        //        }
        //    });
        //});
    </script>
</head>
<body >
    <header ng-include="'app/views/partials/header.html'"></header>
    <section style="margin-top:100px;">
        <!--Page content-->
        <div data-ui-view=""></div>
    </section>
    <footer ng-include="'app/views/partials/footer.html'"></footer>
</body>
</html>
